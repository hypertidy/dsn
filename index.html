<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Data Source Name Helpers for Use With GDAL • dsn</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="bootstrap-toc.css">
<script src="bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="Data Source Name Helpers for Use With GDAL">
<meta property="og:description" content="Simple helpers for GDAL data source names (DSN), for prefix and suffix and other handling. ">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-home">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">dsn</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.0.1.9002</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="reference/index.html">Reference</a>
</li>
<li>
  <a href="news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/hypertidy/dsn/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="contents col-md-9">
<div class="section level1">
<div class="page-header"><h1 id="dsn">dsn<a class="anchor" aria-label="anchor" href="#dsn"></a>
</h1></div>
<!-- badges: start -->

<p>The goal of dsn is to provide simple helpers for <a href="https://gdal.org/" class="external-link">GDAL</a> data source name prefixes and related string handling.</p>
<p>Please note that dsn is not doing anything <em>with GDAL</em>, this is pure string handling for things commonly used for GDAL:</p>
<ul>
<li>prefixing <code>/vsicurl/</code> to an online data source url for <a href="https://gdal.org/user/virtual_file_systems.html" class="external-link">GDAL’s Virtual File System</a>
</li>
<li>prefixing a driver declaration to a data source, e.g. <code>HDF5:/my/files/data.h5</code> or <code>NETCDF:C:/temp/nc/afile.nc</code>
</li>
<li>wrapping a <a href="https://gdal.org/user/raster_data_model.html#subdatasets-domain" class="external-link">subdataset</a> declaration, e.g. <code>NETCDF:/myfiles/data.nc:variable</code> that can occur in <a href="https://gdal.org/drivers/raster/netcdf.html#multiple-image-handling-subdatasets" class="external-link">NETCDF</a> and similar formats</li>
<li>wrapping a <a href="https://gdal.org/drivers/raster/vrt.html#vrt-connection-string" class="external-link">VRT connection</a>, e.g. <code>vrt://myfile.tif?bands=3,2,1</code>
</li>
</ul>
<p>Please see <a href="https://hypertidy.github.io/vapour/reference/vapour_vrt.html" class="external-link">vapour::vapour_vrt()</a> for actual use of GDAL to extend a data source name by opening the source and augmenting available information. dsn is intended to support that usage, and in general intends to be purely string handling, and not make use of the format libraries at all.</p>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<p>You can install the development version of dsn from <a href="https://github.com/" class="external-link">GitHub</a> with:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># install.packages("devtools")</span></span>
<span><span class="fu">devtools</span><span class="fu">::</span><span class="fu">install_github</span><span class="op">(</span><span class="st">"hypertidy/dsn"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="example">Example<a class="anchor" aria-label="anchor" href="#example"></a>
</h2>
<p>This is a basic example, add in the prefix for a vsicurl.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/hypertidy/dsn" class="external-link">dsn</a></span><span class="op">)</span></span>
<span><span class="fu"><a href="reference/prefix.html">vsicurl</a></span><span class="op">(</span><span class="st">"https://netcdf-r-us.org/f.nc"</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "/vsicurl/https://netcdf-r-us.org/f.nc"</span></span>
<span></span>
<span><span class="fu"><a href="reference/prefix.html">driver</a></span><span class="op">(</span><span class="st">"somefile.h5"</span>, <span class="st">"HDF5"</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "HDF5:somefile.h5"</span></span>
<span></span>
<span><span class="fu"><a href="reference/prefix.html">unvsicurl</a></span><span class="op">(</span><span class="st">"/vsicurl/https://netcdf-r-us.org/f.nc"</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "https://netcdf-r-us.org/f.nc"</span></span>
<span></span>
<span><span class="fu"><a href="reference/prefix.html">unprefix</a></span><span class="op">(</span><span class="st">"NETCDF:/u/user/somefile.nc"</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "/u/user/somefile.nc"</span></span></code></pre></div>
<p>NetCDF is a very common source and occasionally requires explicit driver declaration, so we have a simple <code><a href="reference/prefix.html">driver()</a></code> wrapper for that.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="op">(</span><span class="va">nc</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/prefix.html">netcdf</a></span><span class="op">(</span><span class="st">"/u/user/somfile.nc"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "NETCDF:/u/user/somfile.nc"</span></span>
<span></span>
<span><span class="fu"><a href="reference/prefix.html">unprefix</a></span><span class="op">(</span><span class="va">nc</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "/u/user/somfile.nc"</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="real-world-example">Real world example<a class="anchor" aria-label="anchor" href="#real-world-example"></a>
</h2>
<p>Here is a less basic and real world example.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>https<span class="sc">:</span><span class="er">//</span>www.ncei.noaa.gov<span class="sc">/</span>data<span class="sc">/</span>sea<span class="sc">-</span>surface<span class="sc">-</span>temperature<span class="sc">-</span>optimum<span class="sc">-</span>interpolation<span class="sc">/</span>v2<span class="fl">.1</span><span class="sc">/</span>access<span class="sc">/</span>avhrr<span class="sc">/</span><span class="dv">202109</span><span class="sc">/</span>oisst<span class="sc">-</span>avhrr<span class="sc">-</span>v02r01.<span class="fl">20210930.</span>nc</span></code></pre></div>
<p>These files have four variables and so need to be referenced using subdataset syntax. They are online so we need GDAL’s virtual file system <a href="https://gdal.org/user/virtual_file_systems.html" class="external-link">vsicurl</a> to access it. Also, they are <a href="https://github.com/mdsumner/fixoisst" class="external-link">non-compliant NetCDF</a> in that they don’t declare in a robust way what their coordinate reference system is (it’s longlat).</p>
<p>(Even if you have the files locally you still need the subdataset and crs handling).</p>
<p>So, we can find this stuff out with investigation. See there are subdatasets <code>sst</code>, <code>anom</code>, <code>err</code>, <code>ice</code>.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">u</span> <span class="op">&lt;-</span> <span class="st">"https://www.ncei.noaa.gov/data/sea-surface-temperature-optimum-interpolation/v2.1/access/avhrr/202109/oisst-avhrr-v02r01.20210930.nc"</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="fu">vapour</span><span class="fu">::</span><span class="fu">vapour_raster_info</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="st">"/vsicurl"</span>, <span class="va">u</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; List of 14</span></span>
<span><span class="co">#&gt;  $ geotransform: num [1:6] 0 1 0 0 0 1</span></span>
<span><span class="co">#&gt;  $ dimension   : int [1:2] 512 512</span></span>
<span><span class="co">#&gt;  $ dimXY       : int [1:2] 512 512</span></span>
<span><span class="co">#&gt;  $ minmax      : NULL</span></span>
<span><span class="co">#&gt;  $ block       : NULL</span></span>
<span><span class="co">#&gt;  $ projection  : NULL</span></span>
<span><span class="co">#&gt;  $ bands       : NULL</span></span>
<span><span class="co">#&gt;  $ projstring  : NULL</span></span>
<span><span class="co">#&gt;  $ nodata_value: NULL</span></span>
<span><span class="co">#&gt;  $ overviews   : NULL</span></span>
<span><span class="co">#&gt;  $ filelist    : chr "/vsicurl/https://www.ncei.noaa.gov/data/sea-surface-temperature-optimum-interpolation/v2.1/access/avhrr/202109/"| __truncated__</span></span>
<span><span class="co">#&gt;  $ datatype    : NULL</span></span>
<span><span class="co">#&gt;  $ extent      : num [1:4] 0 512 512 0</span></span>
<span><span class="co">#&gt;  $ subdatasets : chr [1:4] "NETCDF:\"/vsicurl/https://www.ncei.noaa.gov/data/sea-surface-temperature-optimum-interpolation/v2.1/access/avhr"| __truncated__ "NETCDF:\"/vsicurl/https://www.ncei.noaa.gov/data/sea-surface-temperature-optimum-interpolation/v2.1/access/avhr"| __truncated__ "NETCDF:\"/vsicurl/https://www.ncei.noaa.gov/data/sea-surface-temperature-optimum-interpolation/v2.1/access/avhr"| __truncated__ "NETCDF:\"/vsicurl/https://www.ncei.noaa.gov/data/sea-surface-temperature-optimum-interpolation/v2.1/access/avhr"| __truncated__</span></span></code></pre></div>
<p>And, with GDAL tools we can augment the missing metadata and get the subdatasets etc.</p>
<p>Please note that the subdatasets might not always be in order, you really need to ask for them by name.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">sds</span> <span class="op">&lt;-</span> <span class="fu">vapour</span><span class="fu">::</span><span class="fu">vapour_sds_names</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="st">"/vsicurl"</span>, <span class="va">u</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="op">(</span><span class="va">sst0</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/grep.html" class="external-link">grep</a></span><span class="op">(</span><span class="st">":sst$"</span>, <span class="va">sds</span>, value <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "NETCDF:\"/vsicurl/https://www.ncei.noaa.gov/data/sea-surface-temperature-optimum-interpolation/v2.1/access/avhrr/202109/oisst-avhrr-v02r01.20210930.nc\":sst"</span></span></code></pre></div>
<p>Finally, now we take that subdataset and augment it (this creates a GDAL open dataset in memory, and serializes it to in-memory VRT text).</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">vrt</span> <span class="op">&lt;-</span> <span class="fu">vapour</span><span class="fu">::</span><span class="fu">vapour_vrt</span><span class="op">(</span><span class="va">sst0</span>, projection <span class="op">=</span> <span class="st">"OGC:CRS84"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">vrt</span></span>
<span><span class="co">#&gt; [1] "&lt;VRTDataset rasterXSize=\"1440\" rasterYSize=\"720\"&gt;\n  &lt;SRS dataAxisToSRSAxisMapping=\"1,2\"&gt;GEOGCS[\"WGS 84\",DATUM[\"WGS_1984\",SPHEROID[\"WGS 84\",6378137,298.257223563,AUTHORITY[\"EPSG\",\"7030\"]],AUTHORITY[\"EPSG\",\"6326\"]],PRIMEM[\"Greenwich\",0,AUTHORITY[\"EPSG\",\"8901\"]],UNIT[\"degree\",0.0174532925199433,AUTHORITY[\"EPSG\",\"9122\"]],AXIS[\"Longitude\",EAST],AXIS[\"Latitude\",NORTH]]&lt;/SRS&gt;\n  &lt;GeoTransform&gt;  0.0000000000000000e+00,  2.5000000000000000e-01,  0.0000000000000000e+00,  9.0000000000000000e+01,  0.0000000000000000e+00, -2.5000000000000000e-01&lt;/GeoTransform&gt;\n  &lt;Metadata&gt;\n    &lt;MDI key=\"lat#grids\"&gt;Uniform grid from -89.875 to 89.875 by 0.25&lt;/MDI&gt;\n    &lt;MDI key=\"lat#long_name\"&gt;Latitude&lt;/MDI&gt;\n    &lt;MDI key=\"lat#units\"&gt;degrees_north&lt;/MDI&gt;\n    &lt;MDI key=\"lon#grids\"&gt;Uniform grid from 0.125 to 359.875 by 0.25&lt;/MDI&gt;\n    &lt;MDI key=\"lon#long_name\"&gt;Longitude&lt;/MDI&gt;\n    &lt;MDI key=\"lon#units\"&gt;degrees_east&lt;/MDI&gt;\n    &lt;MDI key=\"NC_GLOBAL#cdm_data_type\"&gt;Grid&lt;/MDI&gt;\n    &lt;MDI key=\"NC_GLOBAL#comment\"&gt;Data was converted from NetCDF-3 to NetCDF-4 format with metadata updates in November 2017.&lt;/MDI&gt;\n    &lt;MDI key=\"NC_GLOBAL#Conventions\"&gt;CF-1.6, ACDD-1.3&lt;/MDI&gt;\n    &lt;MDI key=\"NC_GLOBAL#creator_email\"&gt;oisst-help@noaa.gov&lt;/MDI&gt;\n    &lt;MDI key=\"NC_GLOBAL#creator_url\"&gt;https://www.ncei.noaa.gov/&lt;/MDI&gt;\n    &lt;MDI key=\"NC_GLOBAL#date_created\"&gt;2021-10-15T09:12:00Z&lt;/MDI&gt;\n    &lt;MDI key=\"NC_GLOBAL#date_modified\"&gt;2021-10-15T09:12:00Z&lt;/MDI&gt;\n    &lt;MDI key=\"NC_GLOBAL#geospatial_lat_max\"&gt;90&lt;/MDI&gt;\n    &lt;MDI key=\"NC_GLOBAL#geospatial_lat_min\"&gt;-90&lt;/MDI&gt;\n    &lt;MDI key=\"NC_GLOBAL#geospatial_lat_resolution\"&gt;0.25&lt;/MDI&gt;\n    &lt;MDI key=\"NC_GLOBAL#geospatial_lat_units\"&gt;degrees_north&lt;/MDI&gt;\n    &lt;MDI key=\"NC_GLOBAL#geospatial_lon_max\"&gt;360&lt;/MDI&gt;\n    &lt;MDI key=\"NC_GLOBAL#geospatial_lon_min\"&gt;0&lt;/MDI&gt;\n    &lt;MDI key=\"NC_GLOBAL#geospatial_lon_resolution\"&gt;0.25&lt;/MDI&gt;\n    &lt;MDI key=\"NC_GLOBAL#geospatial_lon_units\"&gt;degrees_east&lt;/MDI&gt;\n    &lt;MDI key=\"NC_GLOBAL#history\"&gt;Final file created using preliminary as first guess, and 3 days of AVHRR data. Preliminary uses only 1 day of AVHRR data.&lt;/MDI&gt;\n    &lt;MDI key=\"NC_GLOBAL#id\"&gt;oisst-avhrr-v02r01.20210930.nc&lt;/MDI&gt;\n    &lt;MDI key=\"NC_GLOBAL#institution\"&gt;NOAA/National Centers for Environmental Information&lt;/MDI&gt;\n    &lt;MDI key=\"NC_GLOBAL#instrument\"&gt;Earth Remote Sensing Instruments &amp;gt; Passive Remote Sensing &amp;gt; Spectrometers/Radiometers &amp;gt; Imaging Spectrometers/Radiometers &amp;gt; AVHRR &amp;gt; Advanced Very High Resolution Radiometer&lt;/MDI&gt;\n    &lt;MDI key=\"NC_GLOBAL#instrument_vocabulary\"&gt;Global Change Master Directory (GCMD) Instrument Keywords&lt;/MDI&gt;\n    &lt;MDI key=\"NC_GLOBAL#keywords\"&gt;Earth Science &amp;gt; Oceans &amp;gt; Ocean Temperature &amp;gt; Sea Surface Temperature&lt;/MDI&gt;\n    &lt;MDI key=\"NC_GLOBAL#keywords_vocabulary\"&gt;Global Change Master Directory (GCMD) Earth Science Keywords&lt;/MDI&gt;\n    &lt;MDI key=\"NC_GLOBAL#metadata_link\"&gt;https://doi.org/10.25921/RE9P-PT57&lt;/MDI&gt;\n    &lt;MDI key=\"NC_GLOBAL#naming_authority\"&gt;gov.noaa.ncei&lt;/MDI&gt;\n    &lt;MDI key=\"NC_GLOBAL#ncei_template_version\"&gt;NCEI_NetCDF_Grid_Template_v2.0&lt;/MDI&gt;\n    &lt;MDI key=\"NC_GLOBAL#platform\"&gt;Ships, buoys, Argo floats, MetOp-A, MetOp-B&lt;/MDI&gt;\n    &lt;MDI key=\"NC_GLOBAL#platform_vocabulary\"&gt;Global Change Master Directory (GCMD) Platform Keywords&lt;/MDI&gt;\n    &lt;MDI key=\"NC_GLOBAL#processing_level\"&gt;NOAA Level 4&lt;/MDI&gt;\n    &lt;MDI key=\"NC_GLOBAL#product_version\"&gt;Version v02r01&lt;/MDI&gt;\n    &lt;MDI key=\"NC_GLOBAL#references\"&gt;Reynolds, et al.(2007) Daily High-Resolution-Blended Analyses for Sea Surface Temperature (available at https://doi.org/10.1175/2007JCLI1824.1). Banzon, et al.(2016) A long-term record of blended satellite and in situ sea-surface temperature for climate monitoring, modeling and environmental studies (available at https://doi.org/10.5194/essd-8-165-2016). Huang et al. (2020) Improvements of the Daily Optimum Interpolation Sea Surface Temperature (DOISST) Version v02r01, submitted.Climatology is based on 1971-2000 OI.v2 SST. Satellite data: Pathfinder AVHRR SST and Navy AVHRR SST. Ice data: NCEP Ice and GSFC Ice.&lt;/MDI&gt;\n    &lt;MDI key=\"NC_GLOBAL#sensor\"&gt;Thermometer, AVHRR&lt;/MDI&gt;\n    &lt;MDI key=\"NC_GLOBAL#source\"&gt;ICOADS, NCEP_GTS, GSFC_ICE, NCEP_ICE, Pathfinder_AVHRR, Navy_AVHRR&lt;/MDI&gt;\n    &lt;MDI key=\"NC_GLOBAL#standard_name_vocabulary\"&gt;CF Standard Name Table (v40, 25 January 2017)&lt;/MDI&gt;\n    &lt;MDI key=\"NC_GLOBAL#summary\"&gt;NOAAs 1/4-degree Daily Optimum Interpolation Sea Surface Temperature (OISST) (sometimes referred to as Reynolds SST, which however also refers to earlier products at different resolution), currently available as version v02r01, is created by interpolating and extrapolating SST observations from different sources, resulting in a smoothed complete field. The sources of data are satellite (AVHRR) and in situ platforms (i.e., ships and buoys), and the specific datasets employed may change over time. At the marginal ice zone, sea ice concentrations are used to generate proxy SSTs.  A preliminary version of this file is produced in near-real time (1-day latency), and then replaced with a final version after 2 weeks. Note that this is the AVHRR-ONLY DOISST, available from Oct 1981, but there is a companion DOISST product that includes microwave satellite data, available from June 2002&lt;/MDI&gt;\n    &lt;MDI key=\"NC_GLOBAL#time_coverage_end\"&gt;2021-09-30T23:59:59Z&lt;/MDI&gt;\n    &lt;MDI key=\"NC_GLOBAL#time_coverage_start\"&gt;2021-09-30T00:00:00Z&lt;/MDI&gt;\n    &lt;MDI key=\"NC_GLOBAL#title\"&gt;NOAA/NCEI 1/4 Degree Daily Optimum Interpolation Sea Surface Temperature (OISST) Analysis, Version 2.1 - Final&lt;/MDI&gt;\n    &lt;MDI key=\"NETCDF_DIM_EXTRA\"&gt;{time,zlev}&lt;/MDI&gt;\n    &lt;MDI key=\"NETCDF_DIM_time_DEF\"&gt;{1,5}&lt;/MDI&gt;\n    &lt;MDI key=\"NETCDF_DIM_time_VALUES\"&gt;15978&lt;/MDI&gt;\n    &lt;MDI key=\"NETCDF_DIM_zlev_DEF\"&gt;{1,5}&lt;/MDI&gt;\n    &lt;MDI key=\"NETCDF_DIM_zlev_VALUES\"&gt;0&lt;/MDI&gt;\n    &lt;MDI key=\"sst#add_offset\"&gt;0&lt;/MDI&gt;\n    &lt;MDI key=\"sst#long_name\"&gt;Daily sea surface temperature&lt;/MDI&gt;\n    &lt;MDI key=\"sst#scale_factor\"&gt;0.0099999998&lt;/MDI&gt;\n    &lt;MDI key=\"sst#units\"&gt;Celsius&lt;/MDI&gt;\n    &lt;MDI key=\"sst#valid_max\"&gt;4500&lt;/MDI&gt;\n    &lt;MDI key=\"sst#valid_min\"&gt;-300&lt;/MDI&gt;\n    &lt;MDI key=\"sst#_FillValue\"&gt;-999&lt;/MDI&gt;\n    &lt;MDI key=\"time#long_name\"&gt;Center time of the day&lt;/MDI&gt;\n    &lt;MDI key=\"time#units\"&gt;days since 1978-01-01 12:00:00&lt;/MDI&gt;\n    &lt;MDI key=\"zlev#actual_range\"&gt;0, 0&lt;/MDI&gt;\n    &lt;MDI key=\"zlev#long_name\"&gt;Sea surface height&lt;/MDI&gt;\n    &lt;MDI key=\"zlev#positive\"&gt;down&lt;/MDI&gt;\n    &lt;MDI key=\"zlev#units\"&gt;meters&lt;/MDI&gt;\n  &lt;/Metadata&gt;\n  &lt;VRTRasterBand dataType=\"Int16\" band=\"1\"&gt;\n    &lt;Metadata&gt;\n      &lt;MDI key=\"add_offset\"&gt;0&lt;/MDI&gt;\n      &lt;MDI key=\"long_name\"&gt;Daily sea surface temperature&lt;/MDI&gt;\n      &lt;MDI key=\"NETCDF_DIM_time\"&gt;15978&lt;/MDI&gt;\n      &lt;MDI key=\"NETCDF_DIM_zlev\"&gt;0&lt;/MDI&gt;\n      &lt;MDI key=\"NETCDF_VARNAME\"&gt;sst&lt;/MDI&gt;\n      &lt;MDI key=\"scale_factor\"&gt;0.0099999998&lt;/MDI&gt;\n      &lt;MDI key=\"units\"&gt;Celsius&lt;/MDI&gt;\n      &lt;MDI key=\"valid_max\"&gt;4500&lt;/MDI&gt;\n      &lt;MDI key=\"valid_min\"&gt;-300&lt;/MDI&gt;\n      &lt;MDI key=\"_FillValue\"&gt;-999&lt;/MDI&gt;\n    &lt;/Metadata&gt;\n    &lt;NoDataValue&gt;-999&lt;/NoDataValue&gt;\n    &lt;UnitType&gt;Celsius&lt;/UnitType&gt;\n    &lt;Scale&gt;0.009999999776482582&lt;/Scale&gt;\n    &lt;SimpleSource&gt;\n      &lt;SourceFilename relativeToVRT=\"0\"&gt;NETCDF:\"/vsicurl/https://www.ncei.noaa.gov/data/sea-surface-temperature-optimum-interpolation/v2.1/access/avhrr/202109/oisst-avhrr-v02r01.20210930.nc\":sst&lt;/SourceFilename&gt;\n      &lt;SourceBand&gt;1&lt;/SourceBand&gt;\n      &lt;SourceProperties RasterXSize=\"1440\" RasterYSize=\"720\" DataType=\"Int16\" BlockXSize=\"1440\" BlockYSize=\"720\" /&gt;\n      &lt;SrcRect xOff=\"0\" yOff=\"0\" xSize=\"1440\" ySize=\"720\" /&gt;\n      &lt;DstRect xOff=\"0\" yOff=\"0\" xSize=\"1440\" ySize=\"720\" /&gt;\n    &lt;/SimpleSource&gt;\n  &lt;/VRTRasterBand&gt;\n&lt;/VRTDataset&gt;\n"</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="fu">vapour</span><span class="fu">::</span><span class="fu">vapour_raster_info</span><span class="op">(</span><span class="va">vrt</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; List of 14</span></span>
<span><span class="co">#&gt;  $ geotransform: num [1:6] 0 0.25 0 90 0 -0.25</span></span>
<span><span class="co">#&gt;  $ dimension   : int [1:2] 1440 720</span></span>
<span><span class="co">#&gt;  $ dimXY       : int [1:2] 1440 720</span></span>
<span><span class="co">#&gt;  $ minmax      : NULL</span></span>
<span><span class="co">#&gt;  $ block       : int [1:2] 128 128</span></span>
<span><span class="co">#&gt;  $ projection  : chr "GEOGCRS[\"WGS 84\",\n    DATUM[\"World Geodetic System 1984\",\n        ELLIPSOID[\"WGS 84\",6378137,298.257223"| __truncated__</span></span>
<span><span class="co">#&gt;  $ bands       : int 1</span></span>
<span><span class="co">#&gt;  $ projstring  : chr "+proj=longlat +datum=WGS84 +no_defs"</span></span>
<span><span class="co">#&gt;  $ nodata_value: num -999</span></span>
<span><span class="co">#&gt;  $ overviews   : NULL</span></span>
<span><span class="co">#&gt;  $ filelist    : chr "NETCDF:\"/vsicurl/https://www.ncei.noaa.gov/data/sea-surface-temperature-optimum-interpolation/v2.1/access/avhr"| __truncated__</span></span>
<span><span class="co">#&gt;  $ datatype    : chr "Int16"</span></span>
<span><span class="co">#&gt;  $ extent      : num [1:4] 0 360 -90 90</span></span>
<span><span class="co">#&gt;  $ subdatasets : NULL</span></span></code></pre></div>
<p>Ok so finally we have a solid GDAL DSN that we can use. But, that whole process was expensive, I don’t want to do that for all 15000 of those NetCDF files, and I don’t want to store unwieldy VRT text either.</p>
<p>So the dsn package has the following functions <code><a href="reference/prefix.html">vsicurl()</a></code>, <code><a href="reference/sds.html">sds()</a></code>, and <code><a href="reference/vrtcon.html">vrtcon()</a></code>.</p>
<p><code><a href="reference/vrtcon.html">vrtcon()</a></code> is for a <a href="https://gdal.org/drivers/raster/vrt.html#vrt-connection-string" class="external-link">VRT connection</a> string, a compact and dependency free syntax for augmenting GDAL data source names, there are new features coming for that in GDAL 3.7.</p>
<p>None of this requires GDAL or for any file or URL querying to be done at all. This is useful because <em>we already did it</em> many times over many years, and now we want to summarize our hard won knowledge in a simple augmented file or URL DSN.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/hypertidy/dsn" class="external-link">dsn</a></span><span class="op">)</span></span>
<span><span class="op">(</span><span class="va">vsi</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/prefix.html">vsicurl</a></span><span class="op">(</span><span class="va">u</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "/vsicurl/https://www.ncei.noaa.gov/data/sea-surface-temperature-optimum-interpolation/v2.1/access/avhrr/202109/oisst-avhrr-v02r01.20210930.nc"</span></span>
<span></span>
<span><span class="op">(</span><span class="va">sds</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/sds.html">sds</a></span><span class="op">(</span><span class="va">vsi</span>, <span class="st">"sst"</span>, <span class="st">"NETCDF"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "NETCDF:\"/vsicurl/https://www.ncei.noaa.gov/data/sea-surface-temperature-optimum-interpolation/v2.1/access/avhrr/202109/oisst-avhrr-v02r01.20210930.nc\":sst"</span></span>
<span></span>
<span><span class="op">(</span><span class="va">DSN</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/vrtcon.html">vrtcon</a></span><span class="op">(</span><span class="va">sds</span>, a_srs <span class="op">=</span> <span class="st">"OGC:CRS84"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "vrt://NETCDF:\"/vsicurl/https://www.ncei.noaa.gov/data/sea-surface-temperature-optimum-interpolation/v2.1/access/avhrr/202109/oisst-avhrr-v02r01.20210930.nc\":sst?a_srs=OGC:CRS84"</span></span>
<span></span>
<span><span class="co">## and with that tiny bit of text we are also language independent</span></span>
<span><span class="co">## (but my python installation is not up to scratch yet ...)</span></span></code></pre></div>
<p>Here is a gdalinfo output just to prove it works (requires GDAL 3.7 for the <code>vrt://...?a_srs</code> syntax).</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>gdalinfo <span class="st">"vrt://NETCDF:</span><span class="sc">\"</span><span class="st">/vsicurl/https://www.ncei.noaa.gov/data/sea-surface-temperature-optimum-interpolation/v2.1/access/avhrr/202109/oisst-avhrr-v02r01.20210930.nc</span><span class="sc">\"</span><span class="st">:sst?a_srs=OGC:CRS84"</span> <span class="sc">-</span>nomd</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>Driver<span class="sc">:</span> VRT<span class="sc">/</span>Virtual Raster</span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>Files<span class="sc">:</span> NETCDF<span class="sc">:</span><span class="st">"/vsicurl/https://www.ncei.noaa.gov/data/sea-surface-temperature-optimum-interpolation/v2.1/access/avhrr/202109/oisst-avhrr-v02r01.20210930.nc"</span><span class="sc">:</span>sst</span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>Size is <span class="dv">1440</span>, <span class="dv">720</span></span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>Coordinate System is<span class="sc">:</span></span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a>GEOGCRS[<span class="st">"WGS 84"</span>,</span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a>    DATUM[<span class="st">"World Geodetic System 1984"</span>,</span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a>        ELLIPSOID[<span class="st">"WGS 84"</span>,<span class="dv">6378137</span>,<span class="fl">298.257223563</span>,</span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a>            LENGTHUNIT[<span class="st">"metre"</span>,<span class="dv">1</span>]],</span>
<span id="cb9-10"><a href="#cb9-10" aria-hidden="true" tabindex="-1"></a>        ID[<span class="st">"EPSG"</span>,<span class="dv">6326</span>]],</span>
<span id="cb9-11"><a href="#cb9-11" aria-hidden="true" tabindex="-1"></a>    PRIMEM[<span class="st">"Greenwich"</span>,<span class="dv">0</span>,</span>
<span id="cb9-12"><a href="#cb9-12" aria-hidden="true" tabindex="-1"></a>        ANGLEUNIT[<span class="st">"degree"</span>,<span class="fl">0.0174532925199433</span>],</span>
<span id="cb9-13"><a href="#cb9-13" aria-hidden="true" tabindex="-1"></a>        ID[<span class="st">"EPSG"</span>,<span class="dv">8901</span>]],</span>
<span id="cb9-14"><a href="#cb9-14" aria-hidden="true" tabindex="-1"></a>    CS[ellipsoidal,<span class="dv">2</span>],</span>
<span id="cb9-15"><a href="#cb9-15" aria-hidden="true" tabindex="-1"></a>        AXIS[<span class="st">"longitude"</span>,east,</span>
<span id="cb9-16"><a href="#cb9-16" aria-hidden="true" tabindex="-1"></a>            ORDER[<span class="dv">1</span>],</span>
<span id="cb9-17"><a href="#cb9-17" aria-hidden="true" tabindex="-1"></a>            ANGLEUNIT[<span class="st">"degree"</span>,<span class="fl">0.0174532925199433</span>,</span>
<span id="cb9-18"><a href="#cb9-18" aria-hidden="true" tabindex="-1"></a>                ID[<span class="st">"EPSG"</span>,<span class="dv">9122</span>]]],</span>
<span id="cb9-19"><a href="#cb9-19" aria-hidden="true" tabindex="-1"></a>        AXIS[<span class="st">"latitude"</span>,north,</span>
<span id="cb9-20"><a href="#cb9-20" aria-hidden="true" tabindex="-1"></a>            ORDER[<span class="dv">2</span>],</span>
<span id="cb9-21"><a href="#cb9-21" aria-hidden="true" tabindex="-1"></a>            ANGLEUNIT[<span class="st">"degree"</span>,<span class="fl">0.0174532925199433</span>,</span>
<span id="cb9-22"><a href="#cb9-22" aria-hidden="true" tabindex="-1"></a>                ID[<span class="st">"EPSG"</span>,<span class="dv">9122</span>]]]]</span>
<span id="cb9-23"><a href="#cb9-23" aria-hidden="true" tabindex="-1"></a>Data axis to CRS axis mapping<span class="sc">:</span> <span class="dv">1</span>,<span class="dv">2</span></span>
<span id="cb9-24"><a href="#cb9-24" aria-hidden="true" tabindex="-1"></a>Origin <span class="ot">=</span> (<span class="fl">0.000000000000000</span>,<span class="fl">90.000000000000000</span>)</span>
<span id="cb9-25"><a href="#cb9-25" aria-hidden="true" tabindex="-1"></a>Pixel Size <span class="ot">=</span> (<span class="fl">0.250000000000000</span>,<span class="sc">-</span><span class="fl">0.250000000000000</span>)</span>
<span id="cb9-26"><a href="#cb9-26" aria-hidden="true" tabindex="-1"></a>Corner Coordinates<span class="sc">:</span></span>
<span id="cb9-27"><a href="#cb9-27" aria-hidden="true" tabindex="-1"></a>Upper <span class="fu">Left</span>  (   <span class="fl">0.0000000</span>,  <span class="fl">90.0000000</span>) (  0d <span class="dv">0</span><span class="st">' 0.01"E, 90d 0'</span> <span class="fl">0.00</span><span class="st">"N)</span></span>
<span id="cb9-28"><a href="#cb9-28" aria-hidden="true" tabindex="-1"></a><span class="st">Lower Left  (   0.0000000, -90.0000000) (  0d 0' 0.01"</span>E, 90d <span class="dv">0</span><span class="st">' 0.00"S)</span></span>
<span id="cb9-29"><a href="#cb9-29" aria-hidden="true" tabindex="-1"></a><span class="st">Upper Right (     360.000,      90.000) (360d 0'</span> <span class="fl">0.00</span><span class="st">"E, 90d 0' 0.00"</span>N)</span>
<span id="cb9-30"><a href="#cb9-30" aria-hidden="true" tabindex="-1"></a>Lower <span class="fu">Right</span> (     <span class="fl">360.000</span>,     <span class="sc">-</span><span class="fl">90.000</span>) (360d <span class="dv">0</span><span class="st">' 0.00"E, 90d 0'</span> <span class="fl">0.00</span><span class="st">"S)</span></span>
<span id="cb9-31"><a href="#cb9-31" aria-hidden="true" tabindex="-1"></a><span class="st">Center      ( 180.0000000,   0.0000000) (180d 0' 0.00"</span>E,  0d <span class="dv">0</span><span class="st">' 0.01"N)</span></span>
<span id="cb9-32"><a href="#cb9-32" aria-hidden="true" tabindex="-1"></a><span class="st">Band 1 Block=1440x720 Type=Int16, ColorInterp=Undefined</span></span>
<span id="cb9-33"><a href="#cb9-33" aria-hidden="true" tabindex="-1"></a><span class="st">  NoData Value=-999</span></span>
<span id="cb9-34"><a href="#cb9-34" aria-hidden="true" tabindex="-1"></a><span class="st">  Unit Type: Celsius</span></span>
<span id="cb9-35"><a href="#cb9-35" aria-hidden="true" tabindex="-1"></a><span class="st">  Offset: 0,   Scale:0.00999999977648258</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="code-of-conduct">Code of Conduct<a class="anchor" aria-label="anchor" href="#code-of-conduct"></a>
</h2>
<p>Please note that the dsn project is released with a <a href="https://contributor-covenant.org/version/2/1/CODE_OF_CONDUCT.html" class="external-link">Contributor Code of Conduct</a>. By contributing to this project, you agree to abide by its terms.</p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/hypertidy/dsn/" class="external-link">Browse source code</a></li>
<li><a href="https://github.com/hypertidy/dsn/issues" class="external-link">Report a bug</a></li>
</ul>
</div>

<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small><a href="https://opensource.org/licenses/mit-license.php" class="external-link">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a></small></li>
</ul>
</div>

<div class="community">
<h2 data-toc-skip>Community</h2>
<ul class="list-unstyled">
<li><a href="CODE_OF_CONDUCT.html">Code of conduct</a></li>
</ul>
</div>

<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing dsn</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Michael Sumner <br><small class="roles"> Author, maintainer </small>  </li>
</ul>
</div>

<div class="dev-status">
<h2 data-toc-skip>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/hypertidy/dsn/actions/workflows/R-CMD-check.yaml" class="external-link"><img src="https://github.com/hypertidy/dsn/actions/workflows/R-CMD-check.yaml/badge.svg" alt="R-CMD-check"></a></li>
</ul>
</div>

  </div>
</div>


      <footer><div class="copyright">
  <p></p>
<p>Developed by Michael Sumner.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
